import{_ as d,I as p,c as b,o as c,j as e,aE as i,J as s,a as n,w as l}from"./chunks/framework.D_7aju2Z.js";const y=JSON.parse('{"title":"Minecraft 服务器优化指南","description":"","frontmatter":{},"headers":[],"relativePath":"Mc/Purpur-1.20.1/优化-2.md","filePath":"Mc/Purpur-1.20.1/优化-2.md","lastUpdated":1721809173000}'),u={name:"Mc/Purpur-1.20.1/优化-2.md"};function h(m,a,f,g,k,v){const r=p("VPNolebaseInlineLinkPreview"),t=p("NolebaseGitContributors"),o=p("NolebaseGitChangelog");return c(),b("div",null,[a[80]||(a[80]=e("h1",{id:"minecraft-服务器优化指南",tabindex:"-1"},[n("Minecraft 服务器优化指南 "),e("a",{class:"header-anchor",href:"#minecraft-服务器优化指南","aria-label":"Permalink to “Minecraft 服务器优化指南”"},"​")],-1)),a[81]||(a[81]=e("p",null,[n("注意：对于使用原版、Fabric 或 Spigot（或低于 Paper）的用户，请进入你的 "),e("code",null,"server.properties"),n(" 文件并将 "),e("code",null,"sync-chunk-writes"),n(" 更改为 "),e("code",null,"false"),n("。在 Paper 及其分支上，此选项会被强制设置为 false，但在其他服务器实现上你需要手动将其设置为 false。这样可以让服务器在主线程之外保存区块，减轻主循环的负载。")],-1)),a[82]||(a[82]=e("p",null,"适用于 1.20 版本的指南。部分内容可能仍适用于 1.15 - 1.19。",-1)),e("p",null,[a[1]||(a[1]=n("基于",-1)),s(r,{href:"https://www.spigotmc.org/threads/guide-server-optimization%E2%9A%A1.283181/",target:"_blank",rel:"noreferrer"},{default:l(()=>a[0]||(a[0]=[n("此指南",-1)])),_:1,__:[0]}),a[2]||(a[2]=n("和其他来源（所有相关链接在指南中均有提及）。",-1))]),a[83]||(a[83]=i("",7)),e("ul",null,[e("li",null,[s(r,{href:"https://github.com/PaperMC/Paper",target:"_blank",rel:"noreferrer"},{default:l(()=>a[3]||(a[3]=[n("Paper",-1)])),_:1,__:[3]}),a[4]||(a[4]=n(" - 最流行的服务器软件，旨在提高性能，同时修复游戏和机制不一致的问题。",-1))]),e("li",null,[s(r,{href:"https://github.com/pufferfish-gg/Pufferfish",target:"_blank",rel:"noreferrer"},{default:l(()=>a[5]||(a[5]=[n("Pufferfish",-1)])),_:1,__:[5]}),a[6]||(a[6]=n(" - Paper 的分支，旨在进一步提高服务器性能。",-1))]),e("li",null,[s(r,{href:"https://github.com/PurpurMC/Purpur",target:"_blank",rel:"noreferrer"},{default:l(()=>a[7]||(a[7]=[n("Purpur",-1)])),_:1,__:[7]}),a[8]||(a[8]=n(" - Pufferfish 的分支，专注于功能和自定义自由度。",-1))])]),a[84]||(a[84]=e("p",null,"应避免使用：",-1)),e("ul",null,[a[12]||(a[12]=e("li",null,"任何声称异步处理的付费服务器 JAR - 99.99% 是骗局。",-1)),a[13]||(a[13]=e("li",null,"Bukkit/CraftBukkit/Spigot - 性能上与其他可用服务器软件相比极其过时。",-1)),e("li",null,[a[10]||(a[10]=n("任何在运行时启用/禁用/重载插件的软件。请参阅",-1)),s(r,{href:"#启用-禁用其他插件的插件"},{default:l(()=>a[9]||(a[9]=[n("本节",-1)])),_:1,__:[9]}),a[11]||(a[11]=n("了解原因。",-1))]),a[14]||(a[14]=e("li",null,"许多进一步下游的 Pufferfish 或 Purpur 分支会遇到不稳定和其他问题。如果你寻求更多的性能提升，请优化你的服务器或投资个人私有分支。",-1))]),a[85]||(a[85]=e("h2",{id:"地图预生成",tabindex:"-1"},[n("地图预生成 "),e("a",{class:"header-anchor",href:"#地图预生成","aria-label":"Permalink to “地图预生成”"},"​")],-1)),a[86]||(a[86]=e("p",null,"由于多年来对区块生成所做的各种优化，地图预生成现在仅在 CPU 性能糟糕、单线程或受限的服务器上有用。不过，预生成通常用于生成如 Pl3xMap 或 Dynmap 等世界地图插件的区块。",-1)),e("p",null,[a[16]||(a[16]=n("如果你仍然想预生成世界，可以使用如 ",-1)),s(r,{href:"https://github.com/pop4959/Chunky",target:"_blank",rel:"noreferrer"},{default:l(()=>a[15]||(a[15]=[n("Chunky",-1)])),_:1,__:[15]}),a[17]||(a[17]=n(" 这样的插件来实现。确保设置世界边界，以防止玩家生成新区块！请注意，根据你在预生成插件中设置的半径，预生成有时可能需要数小时。请记住，使用 Paper 及以上版本时，tps 不会受到区块加载的影响，但当服务器的 CPU 过载时，加载区块的速度会显著下降。",-1))]),a[87]||(a[87]=i("",12)),e("blockquote",null,[e("p",null,[a[19]||(a[19]=n("启用此选项会每秒向玩家发送一个保持连接数据包，并且只有在 30 秒内没有响应任何一个数据包时才会超时。响应任何一个数据包将保持玩家连接。换句话说，它不会因为某个数据包在传输过程中丢失而踢出玩家。",-1)),a[20]||(a[20]=e("br",null,null,-1)),a[21]||(a[21]=n(" ~ ",-1)),s(r,{href:"https://purpurmc.org/docs/Configuration/#use-alternate-keepalive",target:"_blank",rel:"noreferrer"},{default:l(()=>a[18]||(a[18]=[n("https://purpurmc.org/docs/Configuration/#use-alternate-keepalive",-1)])),_:1,__:[18]})])]),a[88]||(a[88]=i("",80)),e("blockquote",null,[e("p",null,[a[23]||(a[23]=n("在启用 ",-1)),s(r,{href:"#dabenabled"},{default:l(()=>a[22]||(a[22]=[n("Pufferfish 的 DAB",-1)])),_:1,__:[22]}),a[24]||(a[24]=n(" 时，不建议更改这些值！",-1))])]),a[89]||(a[89]=e("p",null,[n("此选项决定指定的行为和传感器以刻为单位的触发频率。村民的 "),e("code",null,"acquirepoi"),n(" 似乎是最重的行为，因此大大增加了时间间隔。如果村民在找到路径时遇到问题，请减少此值。")],-1)),a[90]||(a[90]=e("h3",{id:"pufferfish-yml-1",tabindex:"-1"},[n("[pufferfish.yml] "),e("a",{class:"header-anchor",href:"#pufferfish-yml-1","aria-label":"Permalink to “[pufferfish.yml]”"},"​")],-1)),a[91]||(a[91]=e("h4",{id:"dab-enabled",tabindex:"-1"},[n("dab.enabled "),e("a",{class:"header-anchor",href:"#dab-enabled","aria-label":"Permalink to “dab.enabled”"},"​")],-1)),a[92]||(a[92]=e("p",null,[e("code",null,"推荐初始值：true")],-1)),e("p",null,[a[26]||(a[26]=n("DAB（大脑动态激活）减少了远离玩家的实体的处理次数。DAB 以渐变方式工作，而不是像 EAR 那样的硬性截止。DAB 将根据 ",-1)),s(r,{href:"#dabactivation-dist-mod"},{default:l(()=>a[25]||(a[25]=[n("dab.activation-dist-mod",-1)])),_:1,__:[25]}),a[27]||(a[27]=n(" 的计算结果减少实体的处理次数。",-1))]),a[93]||(a[93]=i("",48)),e("p",null,[a[29]||(a[29]=e("code",null,"ALTERNATE_CURRENT",-1)),a[30]||(a[30]=n(" 实现基于 ",-1)),s(r,{href:"https://modrinth.com/mod/alternate-current",target:"_blank",rel:"noreferrer"},{default:l(()=>a[28]||(a[28]=[n("Alternate Current",-1)])),_:1,__:[28]}),a[31]||(a[31]=n(" 模组。有关此算法的更多信息可以在他们的资源页面找到。",-1))]),a[94]||(a[94]=i("",46)),e("p",null,[a[33]||(a[33]=n("启用此选项可以隐藏矿石，防止透视作弊玩家发现。有关此功能的详细配置，请查看",-1)),s(r,{href:"https://docs.papermc.io/paper/anti-xray",target:"_blank",rel:"noreferrer"},{default:l(()=>a[32]||(a[32]=[n("配置反透视",-1)])),_:1,__:[32]}),a[34]||(a[34]=n("。启用此选项实际上会降低性能，但它比任何反透视插件都更高效。在大多数情况下，性能影响可以忽略不计。",-1))]),a[95]||(a[95]=i("",5)),e("p",null,[s(r,{href:"https://docs.papermc.io/java-install-update",target:"_blank",rel:"noreferrer"},{default:l(()=>a[35]||(a[35]=[n("原版 Minecraft 和 Minecraft 服务器软件在 1.20.5+ 版本中需要 Java 21 或更高版本",-1)])),_:1,__:[35]}),a[38]||(a[38]=n("。Oracle 改变了他们的许可协议，现在没有理由非要从他们那里获取 Java。推荐的供应商是 ",-1)),s(r,{href:"https://adoptium.net/",target:"_blank",rel:"noreferrer"},{default:l(()=>a[36]||(a[36]=[n("Adoptium",-1)])),_:1,__:[36]}),a[39]||(a[39]=n(" 和 ",-1)),s(r,{href:"https://aws.amazon.com/corretto/",target:"_blank",rel:"noreferrer"},{default:l(()=>a[37]||(a[37]=[n("Amazon Corretto",-1)])),_:1,__:[37]}),a[40]||(a[40]=n("。虽然 OpenJ9 或 GraalVM 等替代 JVM 实现也可以使用，但它们不受 Paper 支持，并且已知会导致问题，因此目前不建议使用。",-1))]),e("p",null,[a[43]||(a[43]=n("你可以配置垃圾回收器以减少大规模垃圾回收任务引起的卡顿。你可以在",-1)),s(r,{href:"https://docs.papermc.io/paper/aikars-flags",target:"_blank",rel:"noreferrer"},{default:l(()=>a[41]||(a[41]=[n("这里",-1)])),_:1,__:[41]}),a[44]||(a[44]=n("找到适用于 Minecraft 服务器的启动参数 [",-1)),a[45]||(a[45]=e("code",null,"SOG",-1)),a[46]||(a[46]=n("]。请记住，这些推荐参数不适用于替代 JVM 实现。 建议使用 ",-1)),s(r,{href:"https://flags.sh",target:"_blank",rel:"noreferrer"},{default:l(()=>a[42]||(a[42]=[n("flags.sh",-1)])),_:1,__:[42]}),a[47]||(a[47]=n(" 启动参数生成器来获取适合你服务器的启动参数。",-1))]),a[96]||(a[96]=e("p",null,[n("此外，在启动参数中在 "),e("code",null,"-jar"),n(" 之前添加测试标志 "),e("code",null,"--add-modules=jdk.incubator.vector"),n(" 可以提高性能。此标志使 Pufferfish 能够在你的 CPU 上使用 SIMD 指令，使一些数学运算更快。目前，它仅用于使游戏插件地图（如 imageonmaps）的渲染速度提高最多 8 倍。")],-1)),a[97]||(a[97]=e("h1",{id:"好得令人难以置信的插件",tabindex:"-1"},[e("code",null,"好得令人难以置信"),n("的插件 "),e("a",{class:"header-anchor",href:"#好得令人难以置信的插件","aria-label":"Permalink to “好得令人难以置信的插件”"},"​")],-1)),a[98]||(a[98]=e("h2",{id:"扫地插件",tabindex:"-1"},[n("扫地插件 "),e("a",{class:"header-anchor",href:"#扫地插件","aria-label":"Permalink to “扫地插件”"},"​")],-1)),e("p",null,[a[50]||(a[50]=n("完全没有必要，因为它们可以被 ",-1)),s(r,{href:"#merge-radius"},{default:l(()=>a[48]||(a[48]=[n("merge-radius",-1)])),_:1,__:[48]}),a[51]||(a[51]=n(" 和 ",-1)),s(r,{href:"#alt-item-despawn-rate"},{default:l(()=>a[49]||(a[49]=[n("alt-item-despawn-rate",-1)])),_:1,__:[49]}),a[52]||(a[52]=n(" 取代，坦率地说，它们的可配置性不如基本的服务器配置。这些插件扫描和移除物品所花费的资源比不移除物品还多。",-1))]),a[99]||(a[99]=e("h2",{id:"生物堆叠插件",tabindex:"-1"},[n("生物堆叠插件 "),e("a",{class:"header-anchor",href:"#生物堆叠插件","aria-label":"Permalink to “生物堆叠插件”"},"​")],-1)),a[100]||(a[100]=e("p",null,"很难证明使用此类插件的合理性。堆叠自然生成的实体比不堆叠它们引起更多的卡顿，因为服务器会不断尝试生成更多的生物。唯一“可接受”的用例是用于大量刷怪笼的服务器。",-1)),a[101]||(a[101]=e("h2",{id:"启用-禁用其他插件的插件",tabindex:"-1"},[n("启用/禁用其他插件的插件 "),e("a",{class:"header-anchor",href:"#启用-禁用其他插件的插件","aria-label":"Permalink to “启用/禁用其他插件的插件”"},"​")],-1)),e("p",null,[a[54]||(a[54]=n("任何在运行时启用或禁用插件的行为都是极其危险的。加载此类插件可能会导致跟踪数据的致命错误，禁用插件可能会因为移除依赖项而导致错误。",-1)),a[55]||(a[55]=e("code",null,"/reload",-1)),a[56]||(a[56]=n(" 命令也存在相同的问题，你可以在",-1)),s(r,{href:"https://madelinemiller.dev/blog/problem-with-reload/",target:"_blank",rel:"noreferrer"},{default:l(()=>a[53]||(a[53]=[n("me4502 的博客文章",-1)])),_:1,__:[53]}),a[57]||(a[57]=n("中了解更多。",-1))]),a[102]||(a[102]=i("",4)),e("p",null,[s(r,{href:"https://spark.lucko.me/",target:"_blank",rel:"noreferrer"},{default:l(()=>a[58]||(a[58]=[n("Spark",-1)])),_:1,__:[58]}),a[61]||(a[61]=n(" 是一个允许你分析服务器 CPU 和内存使用情况的插件。你可以在",-1)),s(r,{href:"https://spark.lucko.me/docs/",target:"_blank",rel:"noreferrer"},{default:l(()=>a[59]||(a[59]=[n("其维基",-1)])),_:1,__:[59]}),a[62]||(a[62]=n("上了解如何使用它。还有一个关于如何找到卡顿原因的指南，参见",-1)),s(r,{href:"https://spark.lucko.me/docs/guides/Finding-lag-spikes",target:"_blank",rel:"noreferrer"},{default:l(()=>a[60]||(a[60]=[n("这里",-1)])),_:1,__:[60]}),a[63]||(a[63]=n("。",-1))]),a[103]||(a[103]=e("h2",{id:"timings",tabindex:"-1"},[n("Timings "),e("a",{class:"header-anchor",href:"#timings","aria-label":"Permalink to “Timings”"},"​")],-1)),a[104]||(a[104]=e("p",null,"查看服务器卡顿时可能发生了什么的方式之一是 Timings。Timings 是一个工具，它让你看到哪些任务花费的时间最长。这是最基本的故障排除工具，如果你请求有关卡顿的帮助，你很可能会被要求提供 Timings。已知 Timings 对服务器有严重的性能影响，建议使用 Spark 插件而不是 Timings，并使用 Purpur 或 Pufferfish 完全禁用 Timings。",-1)),e("p",null,[a[65]||(a[65]=n("要获取服务器的 Timings，只需执行 ",-1)),a[66]||(a[66]=e("code",null,"/timings paste",-1)),a[67]||(a[67]=n(" 命令并点击提供的链接。你可以与他人分享此链接以便他们帮助你。如果你不知道自己在做什么，这也很容易被误读。Aikar 有一个详细的",-1)),s(r,{href:"https://www.youtube.com/watch?v=T4J0A9l7bfQ",target:"_blank",rel:"noreferrer"},{default:l(()=>a[64]||(a[64]=[n("视频教程",-1)])),_:1,__:[64]}),a[68]||(a[68]=n("，教你如何阅读它们。",-1))]),a[105]||(a[105]=e("hr",null,null,-1)),a[106]||(a[106]=e("h1",{id:"minecraft-漏洞及其修复方法",tabindex:"-1"},[n("Minecraft 漏洞及其修复方法 "),e("a",{class:"header-anchor",href:"#minecraft-漏洞及其修复方法","aria-label":"Permalink to “Minecraft 漏洞及其修复方法”"},"​")],-1)),e("p",null,[a[70]||(a[70]=n("要了解如何修复可能导致卡顿或崩溃的 Minecraft 服务器漏洞，请参见",-1)),s(r,{href:"https://github.com/YouHaveTrouble/minecraft-exploits-and-how-to-fix-them",target:"_blank",rel:"noreferrer"},{default:l(()=>a[69]||(a[69]=[n("这里",-1)])),_:1,__:[69]}),a[71]||(a[71]=n("。",-1))]),e("p",null,[s(r,{href:"https://www.spigotmc.org/threads/guide-server-optimization%E2%9A%A1.283181/",target:"_blank",rel:"noreferrer"},{default:l(()=>a[72]||(a[72]=[e("code",null,"SOG",-1)])),_:1,__:[72]})]),e("p",null,[s(r,{href:"https://docs.papermc.io/paper/reference/server-properties",target:"_blank",rel:"noreferrer"},{default:l(()=>a[73]||(a[73]=[n("server.properties",-1)])),_:1,__:[73]})]),e("p",null,[s(r,{href:"https://docs.papermc.io/paper/reference/bukkit-configuration",target:"_blank",rel:"noreferrer"},{default:l(()=>a[74]||(a[74]=[n("bukkit.yml",-1)])),_:1,__:[74]})]),e("p",null,[s(r,{href:"https://docs.papermc.io/paper/reference/spigot-configuration",target:"_blank",rel:"noreferrer"},{default:l(()=>a[75]||(a[75]=[n("spigot.yml",-1)])),_:1,__:[75]})]),e("p",null,[s(r,{href:"https://docs.papermc.io/paper/reference/global-configuration",target:"_blank",rel:"noreferrer"},{default:l(()=>a[76]||(a[76]=[n("paper-global configuration",-1)])),_:1,__:[76]})]),e("p",null,[s(r,{href:"https://docs.papermc.io/paper/reference/world-configuration",target:"_blank",rel:"noreferrer"},{default:l(()=>a[77]||(a[77]=[n("paper-world configuration",-1)])),_:1,__:[77]})]),e("p",null,[s(r,{href:"https://purpurmc.org/docs/Configuration/",target:"_blank",rel:"noreferrer"},{default:l(()=>a[78]||(a[78]=[n("purpur.yml",-1)])),_:1,__:[78]})]),e("p",null,[s(r,{href:"https://docs.pufferfish.host/setup/pufferfish-fork-configuration/",target:"_blank",rel:"noreferrer"},{default:l(()=>a[79]||(a[79]=[n("pufferfish.yml",-1)])),_:1,__:[79]})]),s(t),s(o)])}const P=d(u,[["render",h]]);export{y as __pageData,P as default};
